---
description: Constants 编码规范 - 业务常量定义
globs:
  - '**/constants/**/*.go'
alwaysApply: false
---

# Constants 编码规范

## 与 Enums 的区别

- **Constants（本规范）**：手动编写的业务常量，用于业务逻辑配置（如超时时间、重试次数、服务名称等）
- **Enums**：由 Atlas 从数据库 PostgreSQL ENUM 类型自动生成，**不可手动编辑**，文件头部标注 `// Code generated by gen-enums. DO NOT EDIT.`

## 文件组织

```
constants/
├── <module>_constants.go    # 各模块业务常量（按需创建）
└── common.go                # 通用常量
```

**示例**：
- `auth.go` - 认证相关常量（登录尝试次数、Token 有效期等）
- `services.go` - 服务名称常量
- 根据项目模块划分创建对应的常量文件

## 常量定义模式

```go
// ✅ GOOD - 使用 const 块组织相关常量，添加注释说明
package constants

// 认证相关常量
const (
    // MaxLoginAttempts 最大登录失败次数，超过此次数将锁定账户
    MaxLoginAttempts = 5

    // LockoutDurationMinutes 账户锁定持续时间（分钟）
    LockoutDurationMinutes = 30

    // DefaultAccessTokenTTLSeconds 默认 Access Token 有效期（秒），15 分钟
    DefaultAccessTokenTTLSeconds = 900

    // DefaultRefreshTokenTTLSeconds 默认 Refresh Token 有效期（秒），7 天
    DefaultRefreshTokenTTLSeconds = 7 * 24 * 3600
)
```

```go
// ✅ GOOD - 服务名称常量，提供辅助函数
package constants

// 所有微服务名称常量
const (
    Service<Module1> = "<module1>"
    Service<Module2> = "<module2>"
    // ... 其他服务
)

// AllServices 返回所有服务名称列表
func AllServices() []string {
    return []string{
        Service<Module1>,
        Service<Module2>,
        // ... 其他服务
    }
}
```

```go
// ✅ GOOD - 使用 time.Duration 表示时间常量
package constants

import "time"

const (
    DefaultTimeout = 30 * time.Second
    RetryInterval  = 5 * time.Second
    MaxRetries     = 3
)
```

## 命名规范

- **常量名**：使用 `PascalCase`，全大写表示常量: `MaxLoginAttempts`, `DefaultAccessTokenTTLSeconds`
- **服务常量**：使用 `Service` 前缀: `ServiceAuth`, `ServiceDirectory`
- **文件命名**：使用 `snake_case`，以模块名或用途命名: `auth.go`, `services.go`

## 注释规范

```go
// ✅ GOOD - 每个常量都有注释说明用途和单位
const (
    // MaxLoginAttempts 最大登录失败次数，超过此次数将锁定账户
    MaxLoginAttempts = 5

    // DefaultAccessTokenTTLSeconds 默认 Access Token 有效期（秒），15 分钟
    DefaultAccessTokenTTLSeconds = 900
)
```

## 实现建议

- **按模块组织**：按业务模块组织常量到不同文件
- **添加注释**：每个常量都应该有注释说明用途、单位和取值范围
- **使用类型**：时间相关常量使用 `time.Duration`，数值常量明确单位（秒、分钟等）
- **辅助函数**：相关常量可以提供辅助函数（如 `AllServices()`）
- **不要修改 Enums**：不要手动创建或修改 `enums/` 目录下的文件，它们由 Atlas 自动生成
